!function(){"use strict";angular.module("risevision.widget.common.wysihtml5",[]).directive("wysihtml5",function(){function e(e,o){$(o).wysihtml5({stylesheets:e.stylesheets}),a=s.data("wysihtml5").editor,n=$(".emphasis"),l=$(".font-picker"),i=$(".font-size-picker"),r=$(".text-color"),d=$(".highlight-color"),u=$(".background-color"),t(),a.setValue(e.data)}function t(){$(".font-picker").on("show.bfhselectbox",function(){o()}),$(".font-size-picker, .line-height, .alignment").on("show.bs.dropdown",function(){o()}),$(".text-color, .highlight-color, .background-color").on("beforeShow",function(){o()}),$(".wysihtml5-sandbox").contents().find("body").on("click",function(){var e=null,t=null,u=!1,s=!1,c=!1,h="",g="",p="",y="",m="";o(),e=a.composer.selection.getSelectedNode(),e&&3===e.nodeType&&(t=e.parentNode,t&&1===t.nodeType&&("body"!==t.tagName.toLowerCase()?(u="bold"===window.getComputedStyle(t,null).getPropertyValue("font-weight")?!0:!1,s="italic"===window.getComputedStyle(t,null).getPropertyValue("font-style")?!0:!1,c=-1!==window.getComputedStyle(t,null).getPropertyValue("text-decoration").indexOf("underline")?!0:!1,n.data("plugin_fontStyle").setStyles({bold:u,italic:s,underline:c}),h=window.getComputedStyle(t,null).getPropertyValue("font-family"),h&&l.data("plugin_fontPicker").setFont(h),g=window.getComputedStyle(t,null).getPropertyValue("font-size"),g&&i.data("plugin_fontSizePicker").setFontSize(g),p=$(t).data("line-height")?$(t).data("line-height"):1,$(".line-height button").data("wysihtml5-command-value",p),y=window.getComputedStyle(t,null).getPropertyValue("color"),m=window.getComputedStyle(t,null).getPropertyValue("background-color"),y&&r.spectrum("set",y),m&&d.spectrum("set",m)):(n.data("plugin_fontStyle").setStyles({bold:!1,italic:!1,underline:!1}),$(".line-height button").data("wysihtml5-command-value",1))))})}function o(){$(".open.alignment, .font-picker .open.bfh-selectbox, .font-size-picker .open.bfh-fontsizes, .open.line-height").removeClass("open"),$(".text-color").spectrum("hide"),$(".highlight-color").spectrum("hide"),$(".background-color").spectrum("hide")}var n,l,i,r,d,u,a=null,s=$("#editable");return{restrict:"A",scope:{stylesheets:"=",data:"="},link:e}})}();